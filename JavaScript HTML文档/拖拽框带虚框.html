<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>无标题文档</title>
<style>
 	  #div1{
		  width:100px;
		  height:100px;
		  background:red;
		  position:absolute;
		  }
	.box{
		border:1px dashed black;
		position:absolute;
		}
</style>
<script>
  window.onload=function(){
	  var oDiv=document.getElementById('div1');
	  var disX=0;
	  var disY=0;
	  
	 
 
	  oDiv.onmousedown=function(e){
		  var oEvent=e||window.event;
		  disX=oEvent.clientX-oDiv.offsetLeft;
		  disY=oEvent.clientY-oDiv.offsetTop;
		  
		   //创建一个新的框对象
	  var oBox=document.createElement('div');
	  oBox.className='box';
	  oBox.style.width=oDiv.offsetWidth-2+'px';
	  oBox.style.height=oDiv.offsetHeight-2+'px';
	  
	  oBox.style.left=oDiv.offsetLeft+'px';
	  oBox.style.top=oDiv.offsetTop+'px';

	  document.body.appendChild(oBox);
		  
		  document.onmousemove=function(e){
			  var oEvent=e||window.event;
			  var l=oEvent.clientX-disX;
			  var t=oEvent.clientY-disY;
			  
			  if(l<0){
				  l=0;
				  }
				  else if(l>document.documentElement.clientWidth-oDiv.offsetWidth){
					l=document.documentElement.clientWidth-oDiv.offsetWidth;
					  }
					  
					  
				  if(t<0){
					  t=0;
					  }
					  else if(t>document.documentElement.clientHeight-oDiv.offsetHeight){
						  t=document.documentElement.clientHeight-oDiv.offsetHeight;
					  }
			  
			  oBox.style.left=l+'px';
			  oBox.style.top=t+'px';
			  };
			  
			document.onmouseup=function(){
				 document.onmousemove=null;
				document.onmouseup=null;
				
				oDiv.style.left=oBox.offsetLeft+'px';
				oDiv.style.top=oBox.offsetTop+'px';		
				
				document.body.removeChild(oBox);
				

				 }; 
				 return false;
			
		  };
		   
	  };
</script>

</head>

<body>
<div id="div1"></div>
</body>
</html>
